<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Asprients - Auth</title>
<style>
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #1a1a2e, #162447, #1f4068);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}
.auth-container {
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(12px);
    padding: 35px 25px;
    border-radius: 20px;
    width: 320px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    color: #fff;
    text-align: center;
}
.auth-tabs { display: flex; justify-content: space-around; margin-bottom: 20px; }
.auth-tabs button {
    background: none; border: none; color: #fff; font-size: 1em; cursor: pointer;
    font-weight: 600; padding-bottom: 5px; transition: 0.3s;
}
.auth-tabs button.active { border-bottom: 2px solid #ff6ec7; }
form { display: none; text-align: left; }
form.active { display: block; }
.form-group { margin-bottom: 15px; position: relative; }
.form-group label { display: block; margin-bottom: 5px; }
.form-group input {
    width: 100%; padding: 10px 12px; border-radius: 10px; border: none;
    background: rgba(255,255,255,0.15); color: #fff; font-size: 0.95em; transition: 0.3s;
}
.form-group input::placeholder { color: rgba(255,255,255,0.7); }
.form-group input:focus { outline: none; background: rgba(255,255,255,0.25); box-shadow: 0 0 8px #00fff7; }
button.submit-btn {
    width: 100%; padding: 10px; margin-top: 10px; border: none; border-radius: 10px;
    background: linear-gradient(90deg,#00f7ff,#ff6ec7); color: #fff; font-weight: 600; cursor: pointer; font-size: 1em; transition: 0.3s;
}
button.submit-btn:hover { background: linear-gradient(90deg,#ff6ec7,#00f7ff); transform: translateY(-1px); }
.switch-link { text-align: center; margin-top: 15px; font-size: 0.9em; }
.switch-link a { color: #00f7ff; text-decoration: none; font-weight: 600; cursor: pointer; }
.switch-link a:hover { color: #ff6ec7; }
#message { text-align: center; margin-top: 10px; font-weight: 600; color: #ffb347; }
</style>
<!-- Favicon -->
      <link rel="icon" href="images\logo.png" type="image/png">
            
                    <!-- Apple Touch Icon -->
                              <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
                                        
                                                    <!-- Android / Chrome Icons -->
                                                                  <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
                                                                                  <link rel="icon" type="image/png" sizes="512x512" href="android-chrome-512x512.png">
                                                                                                  
                                                                                                                    <!-- Safari Pinned Tab (vector) -->
                                                                                                                                        <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
                                                                                                                                                            
                                                                                                                                                                                  <!-- Optional: Theme color for mobile address bar -->
                                                                                                                                                                                                          <meta name="theme-color" content="#1f4068">
                                                                                                                                                                                                          
                                                                                                                                                                                                          
                                                                                                                                                                                                          </head>
</head>
<body>

<div class="auth-container">
    <div class="auth-tabs">
        <button id="loginTab" class="active">Login</button>
        <button id="signupTab">Sign Up</button>
    </div>

    <!-- Login Form -->
    <form id="loginForm" class="active">
        <div class="form-group">
            <label for="loginEmail">Email</label>
            <input type="email" id="loginEmail" placeholder="Enter your email" required>
        </div>
        <div class="form-group">
            <label for="loginPassword">Password</label>
            <input type="password" id="loginPassword" placeholder="Enter password" required>
        </div>
        <button type="submit" class="submit-btn">Login</button>
        <!-- Forget Password -->
        <div class="switch-link">
            <a href="#" id="forgotPassword">Forgot Password?</a>
        </div>
        <div class="switch-link">Don't have an account? <a href="#" id="toSignup">Sign Up</a></div>
        <a href="home.html">Skip to main</a>
    </form>

    <!-- Sign Up Form -->
    <form id="signupForm">
        <div class="form-group">
            <label for="signupName">Fullname</label>
            <input type="text" id="signupName" placeholder="Enter full name" required>
        </div>
        <div class="form-group">
            <label for="signupEmail">Email</label>
            <input type="email" id="signupEmail" placeholder="Enter email" required>
        </div>
        <div class="form-group">
            <label for="signupPassword">Password</label>
            <input type="password" id="signupPassword" placeholder="Enter password" required>
        </div>
        <div class="form-group">
            <label for="signupConfirm">Confirm Password</label>
            <input type="password" id="signupConfirm" placeholder="Confirm password" required>
        </div>
        <button type="submit" class="submit-btn">Sign Up</button>
        <div class="switch-link">Already have an account? <a href="#" id="toLogin">Login</a></div>
    </form>

    <div id="message"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyDvxGvUkBkOcYtn8_pl7E50pQd1B2oc904",
  authDomain: "project-a-c6f8a.firebaseapp.com",
  projectId: "project-a-c6f8a",
  storageBucket: "project-a-c6f8a.appspot.com",
  messagingSenderId: "855860821473",
  appId: "1:855860821473:web:bbc9d21bcf7f3ee5ee26a0",
  measurementId: "G-4FK33PZL8J"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const loginForm = document.getElementById('loginForm');
const signupForm = document.getElementById('signupForm');
const loginTab = document.getElementById('loginTab');
const signupTab = document.getElementById('signupTab');
const toSignup = document.getElementById('toSignup');
const toLogin = document.getElementById('toLogin');
const message = document.getElementById('message');

// Toggle forms
function switchForm(form){
    if(form==='login'){
        loginForm.classList.add('active'); signupForm.classList.remove('active');
        loginTab.classList.add('active'); signupTab.classList.remove('active');
    } else{
        signupForm.classList.add('active'); loginForm.classList.remove('active');
        signupTab.classList.add('active'); loginTab.classList.remove('active');
    }
}
loginTab.addEventListener('click', ()=>switchForm('login'));
signupTab.addEventListener('click', ()=>switchForm('signup'));
toSignup.addEventListener('click', ()=>switchForm('signup'));
toLogin.addEventListener('click', ()=>switchForm('login'));

// Signup
signupForm.addEventListener('submit', async e=>{
    e.preventDefault();
    const name = document.getElementById('signupName').value.trim();
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    const confirm = document.getElementById('signupConfirm').value;

    if(!name){ message.innerText="Fullname required"; return; }
    if(password!==confirm){ message.innerText="Passwords do not match"; return; }

    try{
        const userCredential = await createUserWithEmailAndPassword(auth,email,password);
        const user = userCredential.user;
        await setDoc(doc(db,"users",user.uid),{ fullname: name, email: email });
        message.innerText=`Signup Successful ✅ Welcome, ${name}`;
        switchForm('login');
    } catch(err){ message.innerText = err.message; }
});

// Login
loginForm.addEventListener('submit', async e=>{
    e.preventDefault();
    const email = document.getElementById("loginEmail").value;
    const password = document.getElementById("loginPassword").value;

    try{
        const userCredential = await signInWithEmailAndPassword(auth,email,password);
        const user = userCredential.user;
        const docSnap = await getDoc(doc(db,"users",user.uid));
        const fullname = docSnap.exists()? docSnap.data().fullname : "User";
        localStorage.setItem("fullname",fullname); 
        message.innerText = `Login Successful ✅ Welcome, ${fullname}`;
        window.location.href = "home.html";
    } catch(err){ message.innerText = err.message; }
});

// Forgot Password
document.getElementById("forgotPassword").addEventListener("click", async (e)=>{
  e.preventDefault();
  const email = document.getElementById("loginEmail").value;
  if(!email){
    message.innerText = "⚠️ Enter your email to reset password.";
    return;
  }
  try {
    await sendPasswordResetEmail(auth, email);
    message.innerText = "📩 Password reset link sent! Please Check spam folder ";
  } catch(err){
    message.innerText = "❌ " + err.message;
  }
});

// Auth State Listener
onAuthStateChanged(auth, (user)=>{
  if(user){
    window.location.href = "home.html"; // ✅ sirf redirect karega
  }
});
</script>
</body>
</html>
